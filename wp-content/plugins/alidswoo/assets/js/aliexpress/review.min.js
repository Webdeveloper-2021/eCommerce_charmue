!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=146)}({146:function(e,t,i){e.exports=i(147)},147:function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}jQuery((function(e){var t="before",n="US $";(function(){Handlebars.registerHelper("format_price",(function(e,i){e=parseFloat(e);var r=i.hash.decimalLength||2,a=i.hash.thousandsSep||",",o=i.hash.decimalSep||".",s="\\d(?=(\\d{3})+"+(r>0?"\\D":"$")+")",c=e.toFixed(Math.max(0,~~r)),d=(o?c.replace(".",o):c).replace(new RegExp(s,"g"),"$&"+a);return"before"===t?n+""+d:d+""+n})),Handlebars.registerHelper("stars",(function(e){for(var t="",i=e.toString().split("."),n=!1,r=1;r<=5;r++)i[0]>=r?t+='<i class="fa fa-star"></i>':n?t+='<i class="fa fa-star-o"></i>':(n=!0,i[1]>7?t+='<i class="fa fa-star"></i>':i[1]<3?t+='<i class="fa fa-star-o"></i>':i[1]>=3&&i[1]<=7?t+='<i class="fa fa-star-half-o"></i>':t+='<i class="fa fa-star-o"></i>');return t}))})();var r=!1;(function(){var t=null;function n(t,n,r){n=""!==n&&"object"===i(n)?window.ADS.serialize(n):n,e.ajaxQueue({url:ajaxurl,data:{action:"adsw_action_reviews",ads_action:t,args:n},type:"POST",dataType:"json",success:r})}function a(){if(e("#ads_review-form .js-select-cat").hide(),"categories"==e('#ads_review-form [name="prod_type"]').val()){var t=[];e("option:selected","#ads_review-form .js-select-cat").each((function(){t.push(e(this).val())})),e('#ads_review-form [name="applyto"]').val(t.join()),e("#ads_review-form .js-select-cat").show()}e("#apply_min").toggle(e("#apply_empty").is(":checked")),parseInt(e("#apply_min").val())<1&&e("#apply_min").val(1)}function o(t){var i=e("#ali-review").html(),n=e("#ads_review-form");if(t)if(t.hasOwnProperty("error"))window.ADS.notify(t.error,"danger");else{n.html(window.ADS.objTotmpl(i,t)),setTimeout(window.ADS.switchery(n),300);var r=parseInt(e("#total_item").val()),o=parseInt(e("#current_item").val());o>0&&r>0&&window.ADS.progressText(e(".progress-head"),r,o);var s=e('#ads_review-form [name="applyto"]').val();s=s?s.split(","):[],e("#ads_review-form .js-select-cat").find('[multiple="multiple"]').multiselect("select",s),a(),e.event.trigger({type:"request:done",obj:"#ads_review-form"})}}function s(t,i){if(void 0===i)return!1;var n=function(t){var i=t.split("?"),n=i[0],r=i[1].split("&"),a={};return e.each(r,(function(e,t){var i=t.split("=");a[i[0]]=i[1]})),{hostName:n,urlArray:a}}(t);return e.each(i,(function(e,t){n.urlArray[e]=t})),function(t,i){var n=t+"?",r=[];return e.each(i,(function(e,t){void 0===t&&(t=""),r.push(e+"="+t)})),n+=r.join("&")}(n.hostName,n.urlArray)}function c(t){var i=t.post_id,n=e("#ads_activities-list").find('[data-post_id="'+i+'"]'),r=e("#ads_activities-list").find('[data-post_id="'+i+'"] .count-reviews'),a=parseInt(r.text())+t.count;r.text(a),a<t.count_review&&t.page<30?u(t.page,i,t.feedbackUrl):(n.find(".loader-action").hide(),n.find(".loader-done").show(),f(!1))}function d(t){var i=t.index.params,n=t.obj,r=i.post_id,a=i,o={flag:"",author:"",star:"",feedback:"",date:""},s=n.find(".feedback-list-wrap .feedback-item"),d=[],l=e("#ads_activities-list").find('[data-post_id="'+r+'"] .count-reviews').text();(l=parseInt(l),s.each((function(t,i){var n,r,a=[];(o={}).feedback=e(this).find(".buyer-feedback").text(),e(this).find(".buyer-feedback .r-time-new").length&&(o.feedback=e(this).find(".buyer-feedback span:not(.r-time-new)").text()),o.feedback=o.feedback.replace("seller","store"),o.flag=e(this).find(".css_flag").text(),o.author=e(this).find(".user-name").text(),o.star=(n=e(this).find(".star-view span").attr("style"),r=0,(n=parseInt(n.replace(/[^0-9]/g,"")))>0&&(r=parseInt(5*n/100)),r),e(this).find(".pic-view-item").each((function(t,i){a.push(e(i).data("src"))}));var s=e(this).find(".r-time");e(this).find(".r-time-new").length&&(s=e(this).find(".r-time-new")),o.date=s.text(),o.images=a,d.push(o)})),0!==s.length&&l<=a.countReviews)?function(t,i,n){e.ajaxQueue({url:ajaxurl,data:{action:"adsw_action_reviews",ads_action:t,args:i},type:"POST",dataType:"json",success:n})}("upload_review",{post_id:r,feed_list:ADS.b64EncodeUnicode(JSON.stringify(d)),min_star:a.min_star,withPictures:a.withPictures,uploadImages:a.uploadImages,ignoreImages:a.ignoreImages,importedReview:l,page:a.page++,feedbackUrl:a.feedbackUrl,count_review:e("#count_review").val(),approved:a.approved,select_country:JSON.stringify(a.select_country),skip_keywords:a.skip_keywords,select_translate:a.select_translate},c):f(!1)}function l(t){var i=e(".progress-head");if(t.hasOwnProperty("error"))window.ADS.notify(t.error,"danger"),window.ADS.btnUnLock(r),r=!1;else if(t.hasOwnProperty("message"))window.ADS.notify(t.message,"success"),window.ADS.progressText(i,10,10),window.ADS.btnUnLock(r),r=!1;else{var n=e("#item-review-template").html(),a=e("#ads_activities-list");a.find(".table-products").length||a.html(e("<div/>",{class:"table-products"})),a=a.find(".table-products"),window.ADS.progressText(i,t.total,t.current);var o=a.find(".review-item");o.length>=15&&o.last().remove(),a.find(".loader-action").hide(),a.find(".loader-done").show(),a.prepend(window.ADS.objTotmpl(n,t.row)),a.find("div:first").find(".loader-action").show(),e("#current_item").val(t.current),t.row.feedbackUrl?u(1,t.row.post_id,t.row.feedbackUrl):f()}}function u(i,n,r){e("#ads_activities-list").find('[data-post_id="'+n+'"]').find(".loader-action").show();var a=e("#select_translate").val(),o={rate:e("#min_star").val(),countReviews:e("#count_review").val(),translate:"none"===a?"+N+":"+Y+",ignoreImages:e("#ignoreImages").is(":checked"),withPictures:e("#withImage").is(":checked"),uploadImages:e("#uploadImage").is(":checked"),approved:e("#approved").is(":checked"),skip_keywords:e("#skip_keywords").val(),select_translate:a,select_country:e("#select_country").val()},c=s(r,{translate:o.translate,page:i,withPictures:o.withPictures}),l={post_id:n,page:i,feedbackUrl:r,countReviews:o.countReviews,withPictures:o.withPictures,uploadImages:o.uploadImages,ignoreImages:o.ignoreImages,min_star:o.rate,approved:o.approved,skip_keywords:o.skip_keywords,select_translate:o.select_translate,select_country:o.select_country};setTimeout((function(){window.ADS.aliExtension.addTask(c,d,t,{params:l})}),2e3)}function f(t){var i=t?"first_review":"next_review";e("#product-list").show(),n(i,e("#ads_review-form"),l)}function p(){var t=e("#select_translate").val();return"none"===t?Promise.resolve(!0):"www"===t?(window.ADS.aliExtension.enableIframe(),window.ADS.aliExtension.getPage("https://www.aliexpress.com/?alidrop=set_global_site").then((function(e){window.ADS.aliExtension.enableAjax();var t=e.obj.find('script:contains("headerConfig")').text().match(/locale: "\w+_(\w+)",/im);return null!==t&&"US"===t[1].toUpperCase()}))):window.ADS.aliExtension.getPage("https://www.aliexpress.com").then((function(e){return window.ADS.aliExtension.getPage("https://"+t+".aliexpress.com").then((function(e){var i=e.obj.find('script:contains("headerConfig")').text().match(/locale: "\w+_(\w+)",/im);if(null===i)return!1;var n=i[1].toUpperCase();return function(e,t){e=e.toUpperCase(),t=t.toUpperCase();var i={WWW:"US",PT:"BR",RU:"RU",ES:"ES",FR:"FR",PL:"PL",HE:"IW",IT:"IT",TR:"TR",DE:"DE",KO:"KR",AR:"MA"};return void 0!==i[e]&&i[e]===t}(t,n)}))}))}return{init:function(){t=this,window.ADS.aliExtension.sleepTask(1),window.ADS.aliExtension.enableAjax(),n("review_form","",o),e(document).on("click","#js-reviewImport",(function(t){t.preventDefault(),e("#js-reviewNext").remove(),r=e(this),window.ADS.btnLock(r),e("#current_item").val(0),e("#ads_activities-list").html(""),window.ADS.progressText(e(".progress-head"),0,0),p().then((function(t){t?f(!0):(window.ADS.notify(e("#info-lan").text(),"danger"),window.ADS.btnUnLock(r))}))})),e(document).on("click","#js-reviewNext",(function(t){t.preventDefault(),e(this).remove(),r=e("#js-reviewImport"),e("#ads_activities-list").html(""),window.ADS.progressText(e(".progress-head"),0,0),window.ADS.btnLock(r),e("#current_item").val(0),p().then((function(t){t?f(!0):(window.ADS.notify(e("#info-lan").text(),"danger"),window.ADS.btnUnLock(r))}))})),e(document).on("request:done",(function(t){"#ads_review-form"===t.obj&&function(){if(e(document).find("#ignoreImages").is(":checked")){var t=e("#withImage"),i=t.parents(".checkbox-switchery"),n=e("#uploadImage"),r=n.parents(".checkbox-switchery");t.prop("checked")&&t.click(),n.prop("checked")&&n.click(),i.hide(),r.hide()}}()})),e(document).on("click","#ignoreImages",(function(){var t=e("#ads_review-form"),i=t.find("#withImage"),n=i.parents(".checkbox-switchery"),r=t.find("#uploadImage"),a=r.parents(".checkbox-switchery");e(this).is(":checked")?(i.prop("checked")&&i.click(),r.prop("checked")&&r.click(),n.hide(),a.hide()):(n.show(),a.show())})),e(document).on("change",'#ads_review-form [name="prod_type"]',(function(){e('#ads_review-form [name="applyto"]').val(""),a()})),e(document).on("change","#ads_review-form .js-select-cat",(function(){a()})),e(document).on("change",'#ads_review-form [name="apply_empty"]',(function(){a()})),e(document).on("change","#ads_review-form #apply_min",(function(){a()}))}}})().init()}))}});